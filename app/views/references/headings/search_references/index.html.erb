<%= govuk_breadcrumbs 'Sections': references_sections_path,
                      'Headings': references_chapter_headings_path(chapter_id: heading.chapter.id) %>

<h2>Search references for <%= heading.reference_title %></h2>

<% if policy(SearchReference).create? %>
  <%= link_to 'Create new search reference', new_references_heading_search_reference_path(heading, release_service_query_params), class: 'govuk-button' %>
<% end %>

<%= render "references/release_services_selector", url: references_heading_search_references_path(heading) %>

<% if @search_references.none? %>
  <p class="govuk-body">No search references are applied to this category.</p>
<% else %>
  <table class='table table-bordered table-striped table-condensed table-search-references'>
    <thead>
      <tr>
        <th>Title</th>
        <th class="hott-actions-col">
          Actions
        </th>
      </tr>
    </thead>
    <tbody>
      <% @search_references.each do |search_reference| %>
        <tr id="<%= dom_id(search_reference) %>">
          <td><%= search_reference.title %></td>
          <td class="hott-link-group">
            <% if policy(search_reference).update? %>
              <%= link_to "Edit", edit_references_heading_search_reference_path(heading, search_reference, release_service_query_params.merge(original_title: search_reference.title)) %>
            <% end %>
            <% if policy(search_reference).destroy? %>
              <%= link_to "Remove", remove_references_heading_search_reference_path(heading, search_reference, release_service_query_params.merge(original_title: search_reference.title)) %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
